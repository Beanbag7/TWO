# 数据库初始化脚本使用指南

## 概述
我们已经创建了一个名为 `database_init.sql` 的脚本，它可以一键完成数据库的重建和数据初始化。该脚本整合了数据库结构定义和初始数据填充，确保开发环境的一致性。

## 脚本位置
项目根目录: `database_init.sql`

## 功能说明
该脚本主要执行以下操作：
1. **重置数据库**：如果 `equipmentloansystem` 数据库已存在，脚本会先将其删除，然后重新创建。这意味着**所有现有数据将被清空**。
2. **创建表结构**：自动创建系统所需的所有数据表，包括：
    - `users` (用户表)
    - `equipment_types` (设备类型表)
    - `equipments` (设备表)
    - `reservations` (预约记录表)
    - `borrow_records` (借用记录表)
    - `damage_records` (损坏记录表)
    - `maintenance_records` (维修记录表)
3. **初始化数据**：预置了测试所需的基础数据：
    - 15 种设备类型
    - 45 个测试用户（包含管理员、教师、学生等不同角色）
    - 80 台设备信息
    - 相关的预约、借用、损坏及维修记录

## 如何使用

### 方法 1：使用命令行 (推荐)
这是最快速的方法。请打开终端（Terminal 或 CMD）并导航到项目根目录，然后执行以下命令：

```bash
mysql -u root -p < database_init.sql
```
*注意：执行后系统会提示您输入 MySQL 的 `root` 用户密码。输入密码后回车即可。*

### 方法 2：使用图形化工具 (如 Navicat, Workbench, DBeaver)
1. 打开您的数据库管理工具。
2. 连接到本地 MySQL 服务器。
3. 找到“运行 SQL 文件”、“导入 SQL 脚本”或类似的功能选项。
4. 在文件选择对话框中，选中项目根目录下的 `database_init.sql` 文件。
5. 点击“开始”或“执行”。

## 注意事项
> [!WARNING]
> **数据丢失警告**
> 执行此脚本将**完全删除**现有的 `equipmentloansystem` 数据库及其中所有数据。
> - 在开发环境中，这通常是安全的，有助于重置测试环境。
> - 在**生产环境**或**存有重要数据**的环境中，请务必先备份数据，或谨慎操作。

## 验证安装
脚本执行完毕后，您可以通过查询数据库来验证安装是否成功。例如，登录 MySQL 后执行：

```sql
USE equipmentloansystem;
SELECT count(*) FROM users; -- 应该返回 45
SELECT count(*) FROM equipments; -- 应该返回 80
```
如果您看到上述数量，说明数据库初始化成功。
