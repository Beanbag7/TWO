-- 一键初始化设备借用系统数据库脚本 (Part 3 - 业务数据)

-- 4. 插入预约记录数据（40条记录）
-- 待审核的预约
INSERT INTO reservations (user_id, equipment_id, scheduled_borrow_date, scheduled_return_date, status, reservation_time) VALUES
(6, 1, '2025-12-12', '2025-12-15', '待审核', '2025-12-11 09:00:00'),
(7, 3, '2025-12-13', '2025-12-16', '待审核', '2025-12-11 10:30:00'),
(8, 5, '2025-12-14', '2025-12-17', '待审核', '2025-12-11 11:15:00'),
(9, 9, '2025-12-15', '2025-12-18', '待审核', '2025-12-11 14:20:00'),
(10, 13, '2025-12-16', '2025-12-19', '待审核', '2025-12-11 15:45:00'),
(11, 17, '2025-12-17', '2025-12-20', '待审核', '2025-12-11 16:30:00'),
(12, 19, '2025-12-18', '2025-12-21', '待审核', '2025-12-11 17:15:00'),
(13, 21, '2025-12-19', '2025-12-22', '待审核', '2025-12-11 18:00:00'),
(14, 23, '2025-12-20', '2025-12-23', '待审核', '2025-12-11 19:30:00'),
(15, 25, '2025-12-21', '2025-12-24', '待审核', '2025-12-11 20:15:00');

-- 已批准的预约
INSERT INTO reservations (user_id, equipment_id, scheduled_borrow_date, scheduled_return_date, status, reservation_time, approver_id, approval_time) VALUES
(16, 2, '2025-12-10', '2025-12-12', '已批准', '2025-12-09 08:00:00', 1, '2025-12-09 08:30:00'),
(17, 6, '2025-12-11', '2025-12-13', '已批准', '2025-12-09 09:30:00', 1, '2025-12-09 10:00:00'),
(18, 8, '2025-12-12', '2025-12-14', '已批准', '2025-12-09 10:15:00', 1, '2025-12-09 10:30:00'),
(19, 10, '2025-12-13', '2025-12-15', '已批准', '2025-12-09 11:45:00', 1, '2025-12-09 12:00:00'),
(20, 14, '2025-12-14', '2025-12-16', '已批准', '2025-12-09 13:20:00', 2, '2025-12-09 13:30:00'),
(21, 16, '2025-12-15', '2025-12-17', '已批准', '2025-12-09 14:30:00', 2, '2025-12-09 14:45:00'),
(22, 18, '2025-12-16', '2025-12-18', '已批准', '2025-12-09 15:15:00', 2, '2025-12-09 15:30:00'),
(23, 20, '2025-12-17', '2025-12-19', '已批准', '2025-12-09 16:45:00', 3, '2025-12-09 17:00:00'),
(24, 22, '2025-12-18', '2025-12-20', '已批准', '2025-12-09 17:30:00', 3, '2025-12-09 17:45:00'),
(25, 24, '2025-12-19', '2025-12-21', '已批准', '2025-12-09 18:15:00', 3, '2025-12-09 18:30:00'),
(26, 26, '2025-12-20', '2025-12-22', '已批准', '2025-12-09 19:00:00', 4, '2025-12-09 19:15:00'),
(27, 28, '2025-12-21', '2025-12-23', '已批准', '2025-12-09 20:30:00', 4, '2025-12-09 20:45:00'),
(28, 30, '2025-12-22', '2025-12-24', '已批准', '2025-12-09 21:15:00', 4, '2025-12-09 21:30:00'),
(29, 32, '2025-12-23', '2025-12-25', '已批准', '2025-12-09 22:00:00', 5, '2025-12-09 22:15:00'),
(30, 34, '2025-12-24', '2025-12-26', '已批准', '2025-12-09 23:30:00', 5, '2025-12-09 23:45:00');

-- 已拒绝的预约
INSERT INTO reservations (user_id, equipment_id, scheduled_borrow_date, scheduled_return_date, status, reservation_time, approver_id, approval_time, rejection_reason) VALUES
(31, 4, '2025-12-08', '2025-12-09', '已拒绝', '2025-12-07 09:00:00', 1, '2025-12-07 09:30:00', '用户处于黑名单，无法借用设备'),
(32, 7, '2025-12-09', '2025-12-10', '已拒绝', '2025-12-07 10:30:00', 1, '2025-12-07 11:00:00', '设备已被其他用户预约'),
(33, 11, '2025-12-10', '2025-12-11', '已拒绝', '2025-12-07 11:15:00', 2, '2025-12-07 11:45:00', '用户信用记录不良'),
(34, 15, '2025-12-11', '2025-12-12', '已拒绝', '2025-12-07 14:20:00', 2, '2025-12-07 14:50:00', '设备维护中，暂不可用'),
(35, 27, '2025-12-12', '2025-12-13', '已拒绝', '2025-12-07 15:45:00', 3, '2025-12-07 16:15:00', '超出最大借用天数限制'),
(36, 29, '2025-12-13', '2025-12-14', '已拒绝', '2025-12-07 16:30:00', 3, '2025-12-07 17:00:00', '设备已损坏，等待维修'),
(37, 31, '2025-12-14', '2025-12-15', '已拒绝', '2025-12-07 17:15:00', 4, '2025-12-07 17:45:00', '用户有逾期未还记录'),
(38, 33, '2025-12-15', '2025-12-16', '已拒绝', '2025-12-07 18:00:00', 4, '2025-12-07 18:30:00', '设备库存不足');

-- 已取消的预约
INSERT INTO reservations (user_id, equipment_id, scheduled_borrow_date, scheduled_return_date, status, reservation_time) VALUES
(39, 35, '2025-12-07', '2025-12-09', '已取消', '2025-12-06 14:20:00'),
(40, 36, '2025-12-06', '2025-12-08', '已取消', '2025-12-05 15:45:00'),
(41, 37, '2025-12-05', '2025-12-07', '已取消', '2025-12-04 16:30:00'),
(42, 38, '2025-12-04', '2025-12-06', '已取消', '2025-12-03 09:15:00'),
(43, 39, '2025-12-03', '2025-12-05', '已取消', '2025-12-02 10:45:00');

-- 已转借用的预约
INSERT INTO reservations (user_id, equipment_id, scheduled_borrow_date, scheduled_return_date, status, reservation_time, approver_id, approval_time) VALUES
(44, 40, '2025-12-01', '2025-12-04', '已转借用', '2025-11-30 09:00:00', 1, '2025-11-30 09:30:00'),
(45, 41, '2025-12-02', '2025-12-05', '已转借用', '2025-11-30 10:15:00', 2, '2025-11-30 10:45:00');

-- 5. 插入借用记录数据（50条记录）
INSERT INTO borrow_records (user_id, equipment_id, reservation_id, actual_borrow_time, expected_return_time, actual_return_time, borrow_status, checkout_staff_id, return_staff_id, notes) VALUES
(1, 1, NULL, '2025-12-01 09:00:00', '2025-12-04 09:00:00', '2025-12-03 16:30:00', '已归还', 1, 1, '正常归还'),
(2, 3, NULL, '2025-12-02 10:30:00', '2025-12-05 10:30:00', '2025-12-04 14:20:00', '已归还', 1, 2, '正常归还'),
(3, 5, NULL, '2025-12-03 14:15:00', '2025-12-06 14:15:00', '2025-12-05 11:45:00', '已归还', 2, 3, '正常归还'),
(4, 7, NULL, '2025-12-04 09:00:00', '2025-12-07 09:00:00', '2025-12-06 15:10:00', '已归还', 2, 4, '正常归还'),
(5, 9, NULL, '2025-12-05 10:30:00', '2025-12-08 10:30:00', '2025-12-07 13:40:00', '已归还', 3, 5, '正常归还'),
(6, 11, NULL, '2025-12-06 14:15:00', '2025-12-09 14:15:00', '2025-12-08 16:20:00', '已归还', 3, 1, '正常归还'),
(7, 13, NULL, '2025-12-07 09:00:00', '2025-12-10 09:00:00', '2025-12-09 14:50:00', '已归还', 4, 2, '正常归還'),
(8, 15, NULL, '2025-12-08 10:30:00', '2025-12-11 10:30:00', '2025-12-10 11:30:00', '已归还', 4, 3, '正常归还'),
(9, 17, NULL, '2025-12-09 14:15:00', '2025-12-12 14:15:00', '2025-12-11 17:00:00', '已归还', 5, 4, '正常归还'),
(10, 19, NULL, '2025-12-10 09:00:00', '2025-12-13 09:00:00', '2025-12-12 15:45:00', '已归还', 5, 5, '正常归还'),
(11, 21, NULL, '2025-12-11 10:30:00', '2025-12-14 10:30:00', '2025-12-13 14:20:00', '已归还', 1, 1, '正常归还'),
(12, 23, NULL, '2025-12-12 14:15:00', '2025-12-15 14:15:00', '2025-12-14 16:10:00', '已归还', 2, 2, '正常归还'),
(13, 25, NULL, '2025-12-13 09:00:00', '2025-12-16 09:00:00', '2025-12-15 15:30:00', '已归还', 3, 3, '正常归还'),
(14, 27, NULL, '2025-12-14 10:30:00', '2025-12-17 10:30:00', '2025-12-16 13:45:00', '已归还', 4, 4, '正常归还'),
(15, 29, NULL, '2025-12-15 14:15:00', '2025-12-18 14:15:00', '2025-12-17 17:20:00', '已归还', 5, 5, '正常归还'),
(26, 31, NULL, '2025-11-01 09:00:00', '2025-11-08 09:00:00', '2025-11-07 16:00:00', '已归还', 1, 1, '正常归还'),
(27, 32, 24, '2025-11-02 10:30:00', '2025-11-09 10:30:00', '2025-11-08 15:30:00', '已归还', 2, 2, '正常归还'),
(28, 33, NULL, '2025-11-03 14:15:00', '2025-11-10 14:15:00', '2025-11-09 17:20:00', '已归还', 3, 3, '正常归还'),
(29, 34, NULL, '2025-11-05 09:00:00', '2025-11-12 09:00:00', '2025-11-11 14:15:00', '已归还', 4, 4, '正常归还'),
(30, 35, NULL, '2025-11-06 10:30:00', '2025-11-13 10:30:00', '2025-11-12 16:45:00', '已归还', 5, 5, '正常归还'),
(31, 36, NULL, '2025-11-20 09:00:00', '2025-11-23 09:00:00', '2025-11-25 10:00:00', '逾期', 1, 1, '逾期归还'),
(32, 37, NULL, '2025-11-25 10:30:00', '2025-11-28 10:30:00', '2025-11-30 09:30:00', '逾期', 2, 2, '逾期归还'),
(33, 38, NULL, '2025-11-15 14:20:00', '2025-11-18 14:20:00', '2025-11-20 15:45:00', '逾期', 3, 3, '逾期归还'),
(34, 39, NULL, '2025-11-10 09:00:00', '2025-11-13 09:00:00', '2025-11-15 11:20:00', '逾期', 4, 4, '逾期归还'),
(35, 40, NULL, '2025-11-05 10:30:00', '2025-11-08 10:30:00', '2025-11-10 14:30:00', '逾期', 5, 5, '逾期归还'),
(36, 41, NULL, '2025-10-20 09:00:00', '2025-10-23 09:00:00', '2025-10-25 10:15:00', '逾期', 1, 1, '逾期归还'),
(37, 42, NULL, '2025-10-25 10:30:00', '2025-10-28 10:30:00', '2025-10-30 11:45:00', '逾期', 2, 2, '逾期归还'),
(38, 43, NULL, '2025-10-15 14:20:00', '2025-10-18 14:20:00', '2025-10-20 16:30:00', '逾期', 3, 3, '逾期归还'),
(39, 44, NULL, '2025-12-08 09:00:00', '2025-12-11 09:00:00', '2025-12-10 14:20:00', '损坏', 4, 4, '设备损坏'),
(40, 45, NULL, '2025-12-09 10:30:00', '2025-12-12 10:30:00', '2025-12-11 15:45:00', '损坏', 5, 5, '设备损坏'),
(41, 46, NULL, '2025-10-01 09:00:00', '2025-10-08 09:00:00', '2025-10-07 15:30:00', '已归还', 1, 1, '正常归还'),
(42, 47, NULL, '2025-10-02 10:30:00', '2025-10-09 10:30:00', '2025-10-08 14:20:00', '已归还', 2, 2, '正常归还'),
(43, 48, NULL, '2025-10-03 14:15:00', '2025-10-10 14:15:00', '2025-10-09 16:45:00', '已归还', 3, 3, '正常归还'),
(44, 49, NULL, '2025-10-05 09:00:00', '2025-10-12 09:00:00', '2025-10-11 13:15:00', '已归还', 4, 4, '正常归还'),
(45, 50, NULL, '2025-10-06 10:30:00', '2025-10-13 10:30:00', '2025-10-12 15:00:00', '已归还', 5, 5, '正常归还'),
(6, 51, NULL, '2025-09-01 09:00:00', '2025-09-04 09:00:00', '2025-09-03 16:20:00', '已归还', 1, 1, '正常归还'),
(7, 52, NULL, '2025-09-02 10:30:00', '2025-09-09 10:30:00', '2025-09-08 14:45:00', '已归还', 2, 2, '正常归还'),
(8, 53, NULL, '2025-09-03 14:15:00', '2025-09-10 14:15:00', '2025-09-09 11:30:00', '已归还', 3, 3, '正常归还'),
(9, 54, NULL, '2025-09-04 09:00:00', '2025-09-11 09:00:00', '2025-09-10 15:15:00', '已归还', 4, 4, '正常归还'),
(10, 55, NULL, '2025-09-05 10:30:00', '2025-09-12 10:30:00', '2025-09-11 16:00:00', '已归还', 5, 5, '正常归还'),
(16, 2, 11, '2025-12-10 09:00:00', '2025-12-12 17:00:00', NULL, '使用中', 1, NULL, '当前借用'),
(17, 6, 12, '2025-12-11 10:30:00', '2025-12-13 17:00:00', NULL, '使用中', 1, NULL, '当前借用'),
(18, 8, 13, '2025-12-12 14:15:00', '2025-12-14 17:00:00', NULL, '使用中', 2, NULL, '当前借用'),
(19, 10, 14, '2025-12-13 09:00:00', '2025-12-15 17:00:00', NULL, '使用中', 2, NULL, '当前借用'),
(20, 14, 15, '2025-12-14 10:30:00', '2025-12-16 17:00:00', NULL, '使用中', 3, NULL, '当前借用'),
(21, 16, 16, '2025-12-15 08:30:00', '2025-12-17 17:00:00', NULL, '使用中', 3, NULL, '当前借用'),
(22, 18, 17, '2025-12-16 15:45:00', '2025-12-18 17:00:00', NULL, '使用中', 4, NULL, '当前借用'),
(23, 20, 18, '2025-12-17 11:20:00', '2025-12-19 17:00:00', NULL, '使用中', 4, NULL, '当前借用'),
(24, 22, 19, '2025-12-18 14:10:00', '2025-12-20 17:00:00', NULL, '使用中', 5, NULL, '当前借用'),
(25, 24, 20, '2025-12-19 09:45:00', '2025-12-21 17:00:00', NULL, '使用中', 5, NULL, '当前借用');

-- 6. 插入损坏记录数据
INSERT INTO damage_records (borrow_record_id, reported_by, damage_description, severity, repair_cost, is_resolved, damage_time, resolution_notes) VALUES
(31, 1, '镜头摔裂，无法正常对焦', '重度', 1500.00, TRUE, '2025-11-15 10:30:00', '已更换镜头组件'),
(32, 2, '机身划痕，外观受损', '轻度', 200.00, TRUE, '2025-11-18 14:20:00', '已修复外观'),
(33, 3, '电池仓卡扣损坏', '中度', 500.00, TRUE, '2025-11-22 09:15:00', '已更换电池仓卡扣'),
(34, 4, '屏幕碎裂，显示异常', '重度', 2500.00, FALSE, '2025-11-25 11:45:00', '等待屏幕配件'),
(35, 5, '充电接口接触不良', '轻度', 150.00, TRUE, '2025-11-28 16:30:00', '已修复充电接口'),
(36, 1, '云台电机故障，无法稳定拍摄', '重度', 3000.00, TRUE, '2025-11-30 13:20:00', '已更换云台电机'),
(37, 2, '存储卡槽损坏，无法读取SD卡', '中度', 800.00, FALSE, '2025-12-02 10:10:00', '等待存储卡槽配件'),
(38, 3, '按键失灵，部分功能无法使用', '轻度', 300.00, TRUE, '2025-12-05 15:40:00', '已更换按键模块'),
(39, 4, '扬声器损坏，声音失真', '中度', 600.00, TRUE, '2025-12-07 09:25:00', '已更换扬声器单元'),
(40, 5, '硬盘读写速度异常', '中度', 400.00, TRUE, '2025-12-09 14:15:00', '已修复硬盘接口'),
(41, 1, '投影仪灯泡老化，亮度不足', '中度', 800.00, TRUE, '2025-11-10 11:30:00', '已更换投影仪灯泡'),
(42, 2, '打印机卡纸频繁', '轻度', 200.00, TRUE, '2025-11-12 15:45:00', '已清理打印机内部'),
(43, 3, '三脚架云台松动', '轻度', 100.00, TRUE, '2025-11-14 09:20:00', '已紧固云台螺丝'),
(44, 4, '闪光灯无法触发', '中度', 350.00, TRUE, '2025-11-16 16:10:00', '已修复闪光灯电路'),
(45, 5, '麦克风灵敏度降低', '轻度', 180.00, TRUE, '2025-11-18 13:40:00', '已清洁麦克风振膜');

-- 7. 插入维修记录数据
-- 已完成的维修
INSERT INTO maintenance_records (equipment_id, damage_record_id, start_date, completion_date, expected_completion_date, maintenance_status, maintenance_description, technician, cost, notes) VALUES
(4, 1, '2025-11-15', '2025-11-20', '2025-11-20', '已修复', '更换镜头组件，重新校准对焦系统', '李技师', 1200.00, '测试各项功能正常'),
(8, 2, '2025-11-18', '2025-11-20', '2025-11-20', '已修复', '机身外壳更换，外观翻新', '王技师', 180.00, '清洁保养完成'),
(12, 3, '2025-11-22', '2025-11-25', '2025-11-25', '已修复', '更换电池仓卡扣组件', '张技师', 450.00, '电池安装正常'),
(16, 5, '2025-11-28', '2025-11-30', '2025-11-30', '已修复', '清洁充电接口，更换触点', '赵技师', 100.00, '充电功能恢复正常'),
(20, 6, '2025-11-30', '2025-12-05', '2025-12-05', '已修复', '更换云台电机系统，重新校准', '刘技师', 2800.00, '飞行测试正常'),
(24, 8, '2025-12-05', '2025-12-08', '2025-12-08', '已修复', '更换按键模块，功能测试', '陈技师', 250.00, '各项操作正常'),
(28, 9, '2025-12-07', '2025-12-09', '2025-12-09', '已修复', '更换扬声器单元，音频测试', '杨技师', 550.00, '音质恢复正常'),
(32, 10, '2025-12-09', '2025-12-11', '2025-12-11', '已修复', '修复硬盘接口，测试读写速度', '周技师', 350.00, '读写速度正常'),
(36, 11, '2025-11-10', '2025-11-15', '2025-11-15', '已修复', '更换投影仪灯泡，调整亮度', '吴技师', 750.00, '亮度恢复正常'),
(40, 12, '2025-11-12', '2025-11-14', '2025-11-14', '已修复', '清理打印机内部，调整纸张路径', '郑技师', 150.00, '打印测试正常'),
(44, 13, '2025-11-14', '2025-11-15', '2025-11-15', '已修复', '紧固云台螺丝，调整阻尼', '孙技师', 80.00, '稳定性测试通过'),
(48, 14, '2025-11-16', '2025-11-18', '2025-11-18', '已修复', '修复闪光灯电路，更换电容', '马技师', 300.00, '闪光测试正常'),
(52, 15, '2025-11-18', '2025-11-19', '2025-11-19', '已修复', '清洁麦克风振膜，调整灵敏度', '林技师', 150.00, '录音测试正常'),
(56, NULL, '2025-11-01', '2025-11-05', '2025-11-05', '已修复', '定期保养维护，清洁内部灰尘', '黄技师', 200.00, '设备运行正常'),
(60, NULL, '2025-11-05', '2025-11-08', '2025-11-08', '已修复', '固件升级，性能优化', '徐技师', 0.00, '软件版本更新完成');

-- 正在进行的维修
INSERT INTO maintenance_records (equipment_id, damage_record_id, start_date, expected_completion_date, maintenance_status, maintenance_description, technician, cost) VALUES
(4, 4, '2025-11-25', '2025-12-10', '维修中', '等待屏幕配件到货，准备更换显示屏总成', '李技师', 2200.00),
(8, 7, '2025-12-02', '2025-12-12', '维修中', '订购新的存储卡槽，等待到货后进行更换', '王技师', 750.00),
(12, NULL, '2025-12-10', '2025-12-15', '维修中', '设备异常噪音，需拆机检查', '张技师', 0.00);

-- 报废记录
INSERT INTO maintenance_records (equipment_id, damage_record_id, start_date, completion_date, maintenance_status, maintenance_description, technician, cost) VALUES
(2, NULL, '2025-10-15', '2025-10-15', '已报废', '设备老化严重，维修成本过高，经评估建议报废处理', '报废管理员', 0.00),
(6, NULL, '2025-11-10', '2025-11-10', '已报废', '进水损坏，主板烧毁，无法修复，作报废处理', '报废管理员', 0.00);

-- 8. 重新启用外键检查
SET FOREIGN_KEY_CHECKS = 1;

-- 9. 验证数据完整性
SELECT '数据插入完成！' as 完成信息;
SELECT CONCAT('用户：', COUNT(*)) FROM users
UNION ALL
SELECT CONCAT('设备：', COUNT(*)) FROM equipments
UNION ALL
SELECT CONCAT('预约记录：', COUNT(*)) FROM reservations
UNION ALL
SELECT CONCAT('借用记录：', COUNT(*)) FROM borrow_records
UNION ALL
SELECT CONCAT('损坏记录：', COUNT(*)) FROM damage_records
UNION ALL
SELECT CONCAT('维修记录：', COUNT(*)) FROM maintenance_records;

SELECT NOW() as 数据更新时间;
